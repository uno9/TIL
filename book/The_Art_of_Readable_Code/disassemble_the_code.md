# 巨大な式を見やすくする
作成日時:2021/5/1

## 1.式を分割する
* 説明変数の使用
  * 式の意味を表現する変数
  ```
    //formに入力された検索ワードを調べる
    input_search_word = doc.data().text;
    ...
  ```
  * 説明変数を使用する利点
    * 簡潔な名前で処理を説明するため、何をしているコードなのか分かりやすくなる
* 論理式の条件式は1行にする
  * 複数の条件があると、コードが複雑になる
  * カバーしきれていない条件範囲がわかりにくい
    * バグを見逃す！！
  * 条件が複雑になる時は、**反対の事をする**
    * 例：否定式を使用すると条件が簡潔になる

## 2.巨大な式の弊害
* 何をしているコードなのか分かりにくい
* メンテナンスが行いにくい
* バグがみつけにくい
* デバッグをしたときに、どこで死んだのか分かりにくい
* コードの本質、主要な概念がつかみにくい

## 3.変数の整理
* 不要な変数を削除する
  * 一時的に値を保存する変数
  * 一度しか変数を使用しない
    * 式の分割に役立たない
    * コードを重複せずに書くことへ貢献していない
* 変数のスコープを狭くする
  * 後述する
* 変数の書き込み（操作・更新）は一度だけ

## スコープを意識する理由
* **変数のスコープが小さい＝変数を参照する範囲が小さい**
  * 変数のスコープ範囲が大きくなると影響範囲が拡大する
    * 変数に変更を加えた際に、影響範囲がたくさん出てくる
* スコープの大きさによって管理のしやすさが変わる
  * 大きいと難しい
    * 変数の中身は何か？
    * 変更をした場合、どこに影響をあたえるのか分からない
    * バグがどこで生まれるのか分からない
  * 小さいとやりやすい
    * 変更が局所的
    * 式を分解しやすい
      * 呼び出される範囲のみ抽出しやすい

![image](https://user-images.githubusercontent.com/47252405/117174276-83d9ea00-ae08-11eb-95ed-b47bf05055cd.png)

参考：
* [第3回　スコープを意識したプログラミング―その2　変数のスコープ](https://gihyo.jp/dev/serial/01/code/000302)
* [意識のスコープ](https://enterprisezine.jp/iti/detail/200)

## 4.変数が整理されていないことによる弊害
* 変数が多いと変数を追跡するのが困難になる
* 変数のスコープが大きいとパフォーマンスに影響がでる
* コードを読む際に、変数の中身が頻繁に更新されると値を追うのが難しくなる
