## ルートテーブル
作成日：2022/02/21

## AWSルートテーブルとは？
- ネットワーク間でのトラフィック経路を判断するツール
- VPC内のサブネットの動きやゲートウェイからの通信に対して、ルーティングを行うソフト
- 1つのルートテーブルに対して、サブネットは複数個設定することができる


## AWSルートテーブルの概念
- メインルートテーブル 
  - VPCに自動的に割り当てられるルートテーブル
  - 関連付けをしていないサブネットのルーティングも制御することができる
- カスタムルートテーブル
  - カスタムルートテーブル：VPC用に作成するルートテーブル
  - 送信先：トラフィックを送信するIPアドレスの範囲（どこにトラフィックを送信したいか？）
  - ターゲット：送信先トラフィックに使用するゲートウェイ・ネットワークインターフェース
- ルートテーブルの関連付け：ルートテーブルとサブネット、インターネットゲートウェイ、仮想プライベートゲートウェイと関連付けを行うことができる
- サブネットルートテーブル
  - サブネットに関連付けられたルートテーブル
- ローカルルート
  - VPC内での通信を行うデフォルトルート
- ゲートウェイルートテーブル
  - インターネットゲートウェイ・仮想プライベートゲートウェイに関連付けられたルートテーブル

公式ドキュメント：https://docs.aws.amazon.com/ja_jp/vpc/latest/userguide/VPC_Route_Tables.html#RouteTables

## AWSルート
- テーブル内のルートは送信先とターゲットを指定するためのもの
  - ルート例：パブリックサブネット-------インターネットゲートウェイ(0.0.0.0/0)
- ローカルルート
  - VPC内での通信を有効にするローカルルートがデフォルトで追加される
  - サブネットルートテーブル・メインルートテーブルでローカルルートを変更、削除することはできない
- カスタムルート
  - 送信先は、VPC内のサブネットのIPv4・IPv6CIDRブロック全体と同じ範囲
  - ターゲットは、NATゲートウェイ・ネットワークインターフェイス・Gateway Load Balancer エンドポイントを設定できる

## ルータとスイッチ
![image](https://user-images.githubusercontent.com/47252405/156005133-ecc3a82e-8a45-4a23-9c8b-8d6af1fce64a.png)

参照: https://milestone-of-se.nesuke.com/nw-basic/as-nw-engineer/osi-reference-model-and-ip-set-model/

## ルーティングの動作
https://www.n-study.com/iprouting/routing-behavior/

https://atmarkit.itmedia.co.jp/ait/articles/0111/01/news001.html


バケツリレー
