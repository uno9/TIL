# VPC End Point
作成日: 2022/02/18

## VPCエンドポイントとは
- VPC内からVPC外と接続をするための接続点
- VPC内のサブネットどうしは直接通信することができる
- 異なるVPCやVPC外に設置するリソースと VPCで接続をするさいは、直接通信をすることができない
  - 通信をするときは、VPCの外にインターネットゲートウェイを設置し、インターネットゲートウェイを介して通信をする必要がある
    - VPC内に置くことができないサービス
      - S3
      - DaynamoDB
      - Secret Manager
      - ECR
      - コードパイプライン
      -  など
    - インターネットゲートウェイを介すことへの問題
      - 毎度、「VPC→インターネットゲートウェイ→S3」と通信をするのは不便
      - インターネットゲートウェイを通るため、一度インターネットに出て通信を行うため、セキュリティ的な不安がある
        - ゲートウェイの危険性：https://eset-info.canon-its.jp/malware_info/special/detail/210302.html
    - インターネットゲートウェイを介さずリソース間で通信をするには？
      - エンドポイントを設置する
        - リソースの出口
        - VPCにエンドポイントを設置することでAWSの内からでることなく、VPC内外の通信を行うことができる

## 2種類のエンドポイント【インターフェイスエンドポイントとゲートウェイエンドポイント】
- VPCエンドポイントの特徴
  - 仮想的なサービスとして提供される
  - 冗長性と高可用性を持つ
    - 自動でスケーリングを行う
- インターフェースエンドポイント
  - プライベートIPアドレスを持つネットワークインターフェイス(ENI)
    - AWS PrivateLink
  - AWS以外の外部サービスでもPrivateLinkに対応していれば連携することができる
    - ENIの機能があるため、インターネットの外に出ることが可能
- ゲートウェイエンドポイント
  - サービスのリージョン単位でルートテーブルに記載してルーティングをする
  - 一度設定をすれば、以降AWSのサービス全体で使用することがでキル
    - 実際にゲートウェイエンドポイントが使用されているサービス：S3、DynamoDBなど

参考ドキュメント：https://dev.classmethod.jp/articles/vpc-endpoint-gateway-type/
