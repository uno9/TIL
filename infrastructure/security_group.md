# Security Group
作成日時:2022/02/08

## 1.セキュリティグループ
* VPCの仮想ファイアウォール
  * ファイアウォール
    * ネットワークへのデータの出入りをコントロールする仕組みのこと
  * コントロールするもの
    * ※必ず下記どちらかのコントロール設定をする必要がある
    * インバウンドトラフィック
      * データが入ってくること
    * アウトバウンドトラフィック
      * データが出ていくこと

## 2.類似するもの：ネットワークACL
- 大きな違い
  - 対象となるリソース
    - ネットワークACLは、サブネットレベルで動作する
    - セキュリティグループは、インスタンス単位で動作する
    - 一般的な構成
      - VPC > sabunet > EC2
      - VPC > sabunet(NACL) > EC2(SG)
    - ネットワークACL→セキュリティグループの順番で制御が掛かる

セキュリティグループ | ネットワーク ACL
-- | --
インスタンスレベルで動作します。 | サブネットレベルで動作します。
ルールの許可のみがサポートされます | ルールの許可と拒否がサポートされます
ステートフル: ルールに関係なく、返されたトラフィックが自動的に許可されます | ステートレス: 返されたトラフィックがルールによって明示的に許可されます
トラフィックを許可するかどうかを決める前に、すべてのルールを評価します | トラフィックを許可するかどうかを決定する際に、最も低い番号のルールから順にルールを処理します。
インスタンスの起動時に誰かがセキュリティグループを指定した場合、または後でセキュリティグループをインスタンスに関連付けた場合にのみ、インスタンスに適用されます。 | 関連付けられているサブネット内のすべてのインスタンスに自動的に適用されます（そのため、セキュリティグループのルールの許容範囲が広すぎる場合は、保護レイヤーを追加する必要があります）。


![](2022-02-10-23-20-03.png)

出典 公式ドキュメント：https://docs.aws.amazon.com/ja_jp/vpc/latest/userguide/VPC_Security.html
